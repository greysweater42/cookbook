{% extends "blog/base.html" %}
{% load static %}

{% block content %}

{% include "blog/post/header.html" %}

<div class="container" style="margin-top:30px">

  <div class="row">

    <div id="div-about" class="col-lg-4 col-md-12 col-sm-12 col-xs-12">

      <div class="list-div">

        <h2>About me</h2>

        A regular everyday data scientist who's trying to manifest his hipsterity by coding in vim.

      </div>

      <div id="div-categories" class="list-div">
        <h3>
          <object type="image/svg+xml" data="{% static "/folder.svg" %}" height="20px" width="20px">.</object>
          Categories
        </h3>
        <ul class="nav nav-pills flex-column">
            {% for category in categories %}
            <li>
                <a href="{{ category.get_absolute_url }}">{{ category.category_name }}
                    {% for cat_num in cat_nums %}
                        {% if cat_num.category_slug == category.category_slug %}
                            <span style="font-size: small; color: gray; font-style: italic;">
                                &nbsp;
                                {{ cat_num.dcount }}
                                {% if cat_num.dcount == 1 %}
                                    article
                                {% else %}
                                    articles
                                {% endif %}
                            </span>
                        {%  endif %}
                    {% endfor %}
                </a>
            </li>
            {% endfor %}
        </ul>
      </div>

    </div>

    <div id="div-posts" class="col-lg-8 col-md-12 col-sm-12 col-xs-12">

      <div class="list-div">

        <h2>All posts</h2>

          {% for post in posts %}

          <table>

            <tr>

              <td style="white-space: nowrap; width: 100px; color: gray; font-size: smaller;">
                 {{ post.format_date }}
              </td>

              <td id="all-posts-titles">
                 <a href="{{ post.get_absolute_url }}">
                 <!-- TODO this is super inefficient -->
                     {% for category_post in category_posts %}
                         {% if category_post.post_slug == post %}
                             {% if category_post.category_slug.category_slug == "scratchpad" %}
                                <span style="color: gray";>
                             {% endif %}
                         {% endif %}
                     {% endfor %}
                     {{ post.title }}
                     {% for category_post in category_posts %}
                         {% if category_post.post_slug == post %}
                             {% if category_post.category_slug.category_slug == "scratchpad" %}
                                 </span>
                             {% endif %}
                         {% endif %}
                     {% endfor %}
                 </a>
              </td>

              <td class="d-none d-lg-block d-xl-block" style="color: gray; font-size: small;">
                  {% for category_post in category_posts %}
                      {% if category_post.post_slug == post %}
                          <a id="all-posts-cats" href="{{ category_post.category_slug.get_absolute_url }}">
                              &nbsp;
                              {{ category_post.category_slug.category_name }}
                          </a>
                      {% endif %}
                  {% endfor %}
              </td>

            </tr>

          </table>

        {% endfor %}

      </div>

    </div>

  </div>

</div>

{% endblock %}
