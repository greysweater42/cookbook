# Classes

[back to the main page](index.html)

***
###### *Programowanie w jÄ™zyku R, s. 463-488*

Object oriented programming in R is unfortunately painfully awful comparing to Python (which seems to be the only reasonable alternative for data science programming). Have a look:


Creating a new class in S4
```{r}
setClass('Polygon', 
         slots = c(x = 'numeric', y = 'numeric'),
         )
```

a new object
```{r}
w1 <- new('Polygon', x = 1:3, y = c(1, 1, 2))
```

Attributes
```{r}
slotNames(w1)
w1@x  
w1@y
```

Methods

print overloading or show
```{r}
setMethod(
  'show',
  signature = c(object = 'Polygon'),
  function(object) {
    cat(sprintf('This is a polygon with %d sides.\n', length(object@x)))
    cat(sprintf('(%g, %g)', object@x, object@y))
    cat('\n')
  }
)
print(w1)
```

Inheritance
```{r}
setClass(
  'Triangle',
  contains = 'Polygon',
  validity = function(object)
    if (length(object@x) != 3) "a triangle has three sides" else TRUE
)

t1 <- new('Triangle', x=c(1, 2, 3), y=c(1, 1, 3))
class(t1)
# new('Triangle', x=c(1, 2, 3, 4), y=c(1, 1, 3, 4))  # error
```

Initialize

*this part of the tutorial is not finished yet*
```{r}
setClass("A", representation(a = "numeric"), "VIRTUAL")
setClass("B", representation(b = "numeric"), contains = "A")

setMethod("initialize", "A", function(.Object, data){
  .Object@a <- data[1]
  .Object
})

setMethod("initialize", "B", function(.Object, data){
  .Object@b <- data[2]
  .Object <- callNextMethod(.Object, data)
  .Object
})

Cl <- setClass("Cl", representation(a = "data.frame", b = "list"))
myCl <- Cl(a = data.frame(a = 1:3, b = letters[1:3]))
```
